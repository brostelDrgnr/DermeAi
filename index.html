<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celulite e Erisipela: Guia Interativo com IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Teal Accent -->
    <!-- Application Structure Plan: A single-page dashboard structure with a top navigation bar for quick scrolling. The core of the application is a side-by-side interactive comparison module, allowing users to select a characteristic and see the differences for Erysipela and Cellulitis instantly. This is supported by an interactive skin layer diagram and a section with clinical management tabs (Diagnosis, Treatment, Alarms). This task-oriented structure was chosen over a linear presentation to better serve as a quick reference and active learning tool for medical students, allowing them to directly compare concepts and access specific information efficiently. Gemini API features (case study generator, Q&A) are added in new, distinct sections to encourage active learning and inquiry. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Side-by-side comparison (Slides 3, 5, 6, 10). Goal: Compare. Viz/Method: Interactive HTML/CSS component where clicking a category updates the displayed text for both conditions. Interaction: Click to update content. Justification: Encourages active comparison rather than passive reading. Method: JS DOM manipulation.
        - Report Info: Skin layer involvement (Slide 3). Goal: Organize/Inform. Viz/Method: Diagram built with styled HTML divs. Interaction: Buttons highlight the affected layers for each condition. Justification: Provides a clear, memorable visual representation of the key anatomical difference. Method: JS class toggling.
        - Report Info: Key clinical differences (Slides 5, 6). Goal: Compare. Viz/Method: A horizontal bar chart visualizing qualitative differences. Interaction: Tooltips on hover. Justification: Fulfills the Chart.js requirement by abstracting qualitative data into a comparative visual format. Library: Chart.js.
        - Report Info: Clinical workflow (Slides 7, 8, 9). Goal: Organize. Viz/Method: Tabbed content area for Diagnosis, Treatment, and Alarms. Interaction: Click tabs to switch content. Justification: Organizes information compactly. Method: JS DOM manipulation.
        - Gemini Feature 1: Case Study Generator. Goal: Apply knowledge. Viz/Method: Button triggers Gemini API call to generate a clinical case. Interaction: Click button, read generated text. Justification: Provides practical, context-based learning scenarios. Method: JS Fetch API to Gemini.
        - Gemini Feature 2: Clinical Q&A. Goal: Inquire/Clarify. Viz/Method: Text area for user question, button triggers Gemini API call. Interaction: Type question, click button, read answer. Justification: Offers a dynamic, personalized learning extension to the static content. Method: JS Fetch API to Gemini.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .active-nav {
            color: #0d9488;
            border-bottom-color: #0d9488;
        }
        .inactive-nav {
            border-bottom-color: transparent;
        }
        .skin-layer {
            transition: all 0.3s ease-in-out;
        }
        .highlight-erisipela {
            background-color: #fca5a5 !important;
            border-color: #ef4444 !important;
            transform: scale(1.02);
        }
        .highlight-celulite {
            background-color: #93c5fd !important;
            border-color: #3b82f6 !important;
            transform: scale(1.02);
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0d9488;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-teal-700">Celulite vs. Erisipela</h1>
                <div class="hidden md:flex items-center space-x-8 text-sm font-medium text-slate-600">
                    <a href="#comparativo" class="hover:text-teal-600 border-b-2 pb-1 border-transparent transition-colors">Comparativo</a>
                    <a href="#anatomia" class="hover:text-teal-600 border-b-2 pb-1 border-transparent transition-colors">Anatomia</a>
                    <a href="#clinica" class="hover:text-teal-600 border-b-2 pb-1 border-transparent transition-colors">Quadro Clínico</a>
                    <a href="#manejo" class="hover:text-teal-600 border-b-2 pb-1 border-transparent transition-colors">Manejo</a>
                    <a href="#ia-tools" class="hover:text-teal-600 border-b-2 pb-1 border-transparent transition-colors">Ferramentas IA</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section id="intro" class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">Diagnóstico Diferencial e Manejo Clínico</h2>
            <p class="max-w-3xl mx-auto text-slate-600">
                Celulite e Erisipela são infecções de pele comuns, mas sua diferenciação é crucial para o tratamento correto. Esta ferramenta interativa, agora com recursos de IA, foi projetada para ajudar acadêmicos de medicina a entender as principais diferenças de forma clara e objetiva.
            </p>
        </section>

        <section id="comparativo" class="mb-16">
            <div class="text-center mb-8">
                <h3 class="text-2xl md:text-3xl font-bold text-slate-900">Comparativo Interativo</h3>
                <p class="text-slate-600 mt-2">Selecione uma característica para comparar as duas condições lado a lado.</p>
            </div>
            <div class="flex flex-col md:flex-row gap-8">
                <div class="md:w-1/4 flex flex-row md:flex-col flex-wrap gap-2">
                    <button data-feature="nivel" class="feature-btn w-auto md:w-full text-left p-3 rounded-lg bg-white shadow-sm border border-slate-200 hover:bg-teal-50 hover:border-teal-300 transition-all focus:outline-none focus:ring-2 focus:ring-teal-500">Nível de Acometimento</button>
                    <button data-feature="bordas" class="feature-btn w-auto md:w-full text-left p-3 rounded-lg bg-white shadow-sm border border-slate-200 hover:bg-teal-50 hover:border-teal-300 transition-all focus:outline-none focus:ring-2 focus:ring-teal-500">Bordas da Lesão</button>
                    <button data-feature="agente" class="feature-btn w-auto md:w-full text-left p-3 rounded-lg bg-white shadow-sm border border-slate-200 hover:bg-teal-50 hover:border-teal-300 transition-all focus:outline-none focus:ring-2 focus:ring-teal-500">Agente Etiológico</button>
                    <button data-feature="clinica" class="feature-btn w-auto md:w-full text-left p-3 rounded-lg bg-white shadow-sm border border-slate-200 hover:bg-teal-50 hover:border-teal-300 transition-all focus:outline-none focus:ring-2 focus:ring-teal-500">Clínica</button>
                </div>
                <div class="md:w-3/4 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-red-100/50 border-2 border-dashed border-red-200 p-6 rounded-xl">
                        <h4 class="text-xl font-bold text-red-800 mb-3">Erisipela</h4>
                        <div id="erisipela-content" class="text-red-900 space-y-2">
                            <p>Selecione uma característica ao lado para começar.</p>
                        </div>
                    </div>
                    <div class="bg-blue-100/50 border-2 border-dashed border-blue-200 p-6 rounded-xl">
                        <h4 class="text-xl font-bold text-blue-800 mb-3">Celulite</h4>
                        <div id="celulite-content" class="text-blue-900 space-y-2">
                             <p>Selecione uma característica ao lado para começar.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="anatomia" class="mb-16">
            <div class="text-center mb-8">
                <h3 class="text-2xl md:text-3xl font-bold text-slate-900">Onde está a Infecção?</h3>
                <p class="text-slate-600 mt-2">Clique nos botões para visualizar o nível de acometimento de cada patologia.</p>
            </div>
            <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                <div class="w-full max-w-sm">
                    <div id="epiderme" class="skin-layer text-center p-3 bg-amber-100 border-b-2 border-amber-200 rounded-t-lg">
                        <span class="font-semibold">Epiderme</span>
                    </div>
                    <div id="derme-superior" class="skin-layer text-center p-6 bg-amber-200 border-b-2 border-amber-300">
                        <span class="font-semibold">Derme Superior & Vasos Linfáticos</span>
                    </div>
                    <div id="derme-profunda" class="skin-layer text-center p-8 bg-amber-300 border-b-2 border-amber-400">
                        <span class="font-semibold">Derme Profunda</span>
                    </div>
                    <div id="subcutaneo" class="skin-layer text-center p-10 bg-amber-400 rounded-b-lg">
                        <span class="font-semibold">Tecido Subcutâneo</span>
                    </div>
                </div>
                <div class="flex flex-col gap-4">
                    <button id="show-erisipela" class="px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition-colors">Mostrar Erisipela</button>
                    <button id="show-celulite" class="px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition-colors">Mostrar Celulite</button>
                    <button id="reset-skin" class="px-6 py-3 bg-slate-400 text-white font-semibold rounded-lg shadow-md hover:bg-slate-500 transition-colors">Resetar</button>
                </div>
            </div>
        </section>

        <section id="clinica" class="mb-16">
            <div class="text-center mb-8">
                <h3 class="text-2xl md:text-3xl font-bold text-slate-900">Apresentação Clínica Comparada</h3>
                <p class="text-slate-600 mt-2">Visualização da intensidade relativa das características clínicas chave.</p>
            </div>
            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-md border border-slate-200">
                <div class="chart-container">
                    <canvas id="clinicalChart"></canvas>
                </div>
            </div>
        </section>

        <section id="manejo" class="mb-16">
            <div class="text-center mb-8">
                <h3 class="text-2xl md:text-3xl font-bold text-slate-900">Manejo Clínico</h3>
                <p class="text-slate-600 mt-2">Navegue pelas abas para explorar o diagnóstico e tratamento.</p>
            </div>
            <div class="w-full max-w-4xl mx-auto">
                <div class="flex border-b border-slate-200">
                    <button data-tab="diagnostico" class="tab-btn flex-1 p-4 font-semibold text-slate-500 border-b-4 transition-colors active-nav">Diagnóstico</button>
                    <button data-tab="tratamento" class="tab-btn flex-1 p-4 font-semibold text-slate-500 border-b-4 transition-colors inactive-nav">Tratamento</button>
                    <button data-tab="risco" class="tab-btn flex-1 p-4 font-semibold text-slate-500 border-b-4 transition-colors inactive-nav">Fatores de Risco</button>
                </div>
                <div class="bg-white mt-0 p-6 rounded-b-xl shadow-md border border-t-0 border-slate-200">
                    <div id="diagnostico" class="tab-content space-y-4">
                        <h4 class="text-lg font-semibold text-teal-700">Como confirmar a suspeita?</h4>
                        <p><strong class="text-slate-900">O diagnóstico é eminentemente clínico!</strong> A história e o exame físico são soberanos.</p>
                        <ul class="list-disc list-inside space-y-2 text-slate-700">
                            <li><span class="font-semibold">Dica Prática:</span> Marcar as bordas do eritema com uma caneta para monitorar a progressão ou regressão da lesão.</li>
                            <li><span class="font-semibold">Exames Laboratoriais:</span> Podem mostrar leucocitose e elevação de PCR/VHS, mas são de suporte, não diagnósticos. Hemoculturas raramente são positivas (&lt;10%).</li>
                            <li><span class="font-semibold">Imagem:</span> O ultrassom é útil para diferenciar de condições como abscesso ou Trombose Venosa Profunda (TVP) em casos de dúvida.</li>
                        </ul>
                    </div>
                    <div id="tratamento" class="tab-content hidden space-y-6">
                        <div>
                            <h4 class="text-lg font-semibold text-teal-700">1. Medidas Gerais</h4>
                             <ul class="list-disc list-inside space-y-2 mt-2 text-slate-700">
                                <li>Elevação do membro afetado para reduzir o edema.</li>
                                <li>Analgesia para controle da dor e hidratação.</li>
                                <li>Tratamento da porta de entrada (ex: antifúngicos para intertrigo).</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-teal-700">2. Antibioticoterapia Empírica</h4>
                             <ul class="list-disc list-inside space-y-2 mt-2 text-slate-700">
                                <li><strong class="text-slate-900">Erisipela / Celulite não purulenta (Alvo: Strep):</strong> Penicilina, Amoxicilina, Cefalexina.</li>
                                <li><strong class="text-slate-900">Celulite Purulenta (Alvo: Staph / MRSA):</strong> Clindamicina ou Sulfametoxazol-Trimetoprima. Lembre-se que abscessos requerem drenagem cirúrgica.</li>
                            </ul>
                        </div>
                        <div>
                             <h4 class="text-lg font-semibold text-teal-700">Critérios para Internação e ATB Venoso</h4>
                             <p class="text-slate-700 mt-2">Sinais de sepse, progressão rápida da infecção, comorbidades descompensadas ou falha da terapia oral.</p>
                        </div>
                    </div>
                    <div id="risco" class="tab-content hidden space-y-4">
                         <h4 class="text-lg font-semibold text-teal-700">Quem está em risco?</h4>
                         <p class="text-slate-700">Os fatores de risco geralmente envolvem uma quebra na barreira da pele ou condições que comprometem a circulação.</p>
                         <ul class="list-disc list-inside space-y-2 text-slate-700">
                            <li><strong class="text-slate-900">Quebra de Barreira:</strong> Fissuras, traumas, úlceras, picadas de inseto, intertrigo ("frieira").</li>
                            <li><strong class="text-slate-900">Condições Subjacentes:</strong> Insuficiência venosa crônica, linfedema, obesidade, diabetes mellitus.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="ia-tools" class="mb-16">
            <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-slate-900">Ferramentas de Aprendizado com IA</h3>
                <p class="text-slate-600 mt-2">Use o poder do Gemini para aprofundar seu conhecimento.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200 flex flex-col">
                    <h4 class="text-xl font-bold text-slate-800 mb-4">Teste seu Conhecimento</h4>
                    <p class="text-slate-600 mb-4">Clique no botão para gerar um caso clínico hipotético e teste sua capacidade de diagnóstico.</p>
                    <button id="generate-case-btn" class="mt-auto w-full bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-teal-700 transition-colors disabled:bg-slate-400">
                        ✨ Gerar Caso Clínico
                    </button>
                    <div id="case-study-container" class="mt-4 p-4 bg-slate-100 rounded-lg min-h-[150px] text-slate-700">
                        <div id="case-study-output" class="whitespace-pre-wrap">Seu caso clínico aparecerá aqui.</div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200 flex flex-col">
                    <h4 class="text-xl font-bold text-slate-800 mb-4">Tire suas Dúvidas</h4>
                    <p class="text-slate-600 mb-4">Tem alguma pergunta sobre celulite ou erisipela? Pergunte ao tutor de IA.</p>
                    <textarea id="qa-input" class="w-full p-2 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-teal-500 focus:border-teal-500" rows="3" placeholder="Ex: Qual o tratamento para um paciente com alergia a penicilina?"></textarea>
                    <button id="ask-question-btn" class="w-full bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-teal-700 transition-colors disabled:bg-slate-400">
                        ✨ Enviar Pergunta
                    </button>
                    <div id="qa-container" class="mt-4 p-4 bg-slate-100 rounded-lg min-h-[150px] text-slate-700">
                         <div id="qa-output">A resposta da IA aparecerá aqui.</div>
                    </div>
                </div>

            </div>
        </section>

        <section id="alarme" class="mb-16">
             <div class="bg-amber-100 border-l-4 border-amber-500 text-amber-900 p-6 rounded-r-lg shadow-lg max-w-4xl mx-auto">
                <div class="flex">
                    <div class="py-1">
                        <span class="text-4xl">⚠️</span>
                    </div>
                    <div class="ml-4">
                        <h3 class="text-xl font-bold text-amber-900">Sinais de Alarme: Quando se preocupar?</h3>
                        <div class="mt-2 text-amber-800 space-y-2">
                           <p>A presença de qualquer um destes sinais deve levantar suspeita de <strong class="font-semibold">Fasciíte Necrosante</strong>, uma emergência cirúrgica.</p>
                           <ul class="list-disc list-inside mt-2 font-medium">
                               <li>Dor desproporcional aos achados do exame físico.</li>
                               <li>Progressão muito rápida do eritema (&gt;2 cm/hora).</li>
                               <li>Presença de bolhas hemorrágicas, necrose ou crepitação.</li>
                               <li>Sinais de toxicidade sistêmica (hipotensão, confusão mental).</li>
                           </ul>
                           <p class="font-bold mt-4">Ação imediata: Avaliação cirúrgica de URGÊNCIA!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-white text-center p-4">
        <p class="text-sm text-slate-300">Ferramenta de estudo desenvolvida para fins educacionais. Recursos de IA podem gerar informações imprecisas.</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const comparisonData = {
        nivel: {
            erisipela: "<strong>Superficial:</strong> Atinge a derme superior e os vasos linfáticos superficiais.",
            celulite: "<strong>Profunda:</strong> Envolve a derme profunda e o tecido subcutâneo."
        },
        bordas: {
            erisipela: "<strong>Bem definidas e elevadas.</strong> Frequentemente descrito como 'sinal do degrau'.",
            celulite: "<strong>Mal definidas e planas.</strong> As bordas se mesclam gradualmente com a pele saudável."
        },
        agente: {
            erisipela: "Quase exclusivamente <i>Streptococcus pyogenes</i> (Grupo A).",
            celulite: "<i>Streptococcus pyogenes</i> e <i>Staphylococcus aureus</i>. Pensar em MRSA se houver pus."
        },
        clinica: {
            erisipela: "<strong>Início súbito e agudo.</strong> Sintomas sistêmicos (febre alta, calafrios) são proeminentes e geralmente precedem a lesão. A pele tem aspecto de 'casca de laranja'.",
            celulite: "<strong>Início mais subagudo.</strong> Sintomas sistêmicos são menos intensos ou ausentes. Pode haver formação de bolhas ou abscessos."
        }
    };

    const featureButtons = document.querySelectorAll('.feature-btn');
    const erisipelaContent = document.getElementById('erisipela-content');
    const celuliteContent = document.getElementById('celulite-content');
    let activeFeatureButton = null;

    featureButtons.forEach(button => {
        button.addEventListener('click', () => {
            const feature = button.dataset.feature;
            
            if (activeFeatureButton) {
                activeFeatureButton.classList.remove('bg-teal-100', 'border-teal-400', 'font-semibold');
            }
            button.classList.add('bg-teal-100', 'border-teal-400', 'font-semibold');
            activeFeatureButton = button;

            erisipelaContent.innerHTML = comparisonData[feature].erisipela;
            celuliteContent.innerHTML = comparisonData[feature].celulite;
        });
    });
    
    if(featureButtons.length > 0) {
        featureButtons[0].click();
    }

    const showErisipelaBtn = document.getElementById('show-erisipela');
    const showCeluliteBtn = document.getElementById('show-celulite');
    const resetSkinBtn = document.getElementById('reset-skin');
    const dermeSuperior = document.getElementById('derme-superior');
    const dermeProfunda = document.getElementById('derme-profunda');
    const subcutaneo = document.getElementById('subcutaneo');
    
    const skinLayers = [dermeSuperior, dermeProfunda, subcutaneo];
    
    function resetSkinLayers() {
        skinLayers.forEach(layer => {
            layer.classList.remove('highlight-erisipela', 'highlight-celulite');
        });
    }

    showErisipelaBtn.addEventListener('click', () => {
        resetSkinLayers();
        dermeSuperior.classList.add('highlight-erisipela');
    });

    showCeluliteBtn.addEventListener('click', () => {
        resetSkinLayers();
        dermeProfunda.classList.add('highlight-celulite');
        subcutaneo.classList.add('highlight-celulite');
    });
    
    resetSkinBtn.addEventListener('click', resetSkinLayers);
    
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tab = button.dataset.tab;

            tabButtons.forEach(btn => {
                btn.classList.remove('active-nav');
                btn.classList.add('inactive-nav');
            });
            button.classList.add('active-nav');
            button.classList.remove('inactive-nav');
            
            tabContents.forEach(content => {
                if (content.id === tab) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        });
    });

    const ctx = document.getElementById('clinicalChart').getContext('2d');
    const clinicalChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Início Súbito', 'Sintomas Sistêmicos Intensos', 'Bordas da Lesão Definidas'],
            datasets: [{
                label: 'Erisipela',
                data: [90, 85, 95],
                backgroundColor: 'rgba(239, 68, 68, 0.6)',
                borderColor: 'rgba(239, 68, 68, 1)',
                borderWidth: 1
            }, {
                label: 'Celulite',
                data: [40, 30, 20],
                backgroundColor: 'rgba(59, 130, 246, 0.6)',
                borderColor: 'rgba(59, 130, 246, 1)',
                borderWidth: 1
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    beginAtZero: true,
                    max: 100,
                    ticks: {
                       callback: function(value) {
                           if (value === 0) return 'Baixo';
                           if (value === 50) return 'Médio';
                           if (value === 100) return 'Alto';
                           return null;
                       }
                    },
                    title: {
                        display: true,
                        text: 'Intensidade / Clareza Relativa'
                    }
                },
                y: {
                   ticks: {
                       autoSkip: false
                   }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Comparação Relativa de Características Clínicas',
                    font: {
                        size: 16
                    }
                },
                tooltip: {
                    enabled: false
                },
                legend: {
                    position: 'bottom'
                }
            }
        }
    });

    const generateCaseBtn = document.getElementById('generate-case-btn');
    const caseStudyOutput = document.getElementById('case-study-output');
    const askQuestionBtn = document.getElementById('ask-question-btn');
    const qaInput = document.getElementById('qa-input');
    const qaOutput = document.getElementById('qa-output');

    const apiKey = "AIzaSyC16PtBD2YwgyrRDL7w2qrZK12Nonqlytw";
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

    function showLoader(element) {
        element.innerHTML = '<div class="flex justify-center items-center h-full"><div class="loader"></div></div>';
    }

    async function callGemini(prompt, outputElement, buttonElement) {
        buttonElement.disabled = true;
        showLoader(outputElement);

        const payload = {
            contents: [{ parts: [{ text: prompt }] }]
        };

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API error: ${response.statusText}`);
            }

            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
            
            if (text) {
                outputElement.innerHTML = text.replace(/\*/g, ''); // Basic markdown removal
            } else {
                outputElement.textContent = "Não foi possível obter uma resposta. Tente novamente.";
            }

        } catch (error) {
            console.error("Gemini API call failed:", error);
            outputElement.textContent = "Ocorreu um erro ao conectar com a IA. Por favor, verifique sua conexão e tente novamente.";
        } finally {
            buttonElement.disabled = false;
        }
    }

    generateCaseBtn.addEventListener('click', () => {
        const prompt = "Gere um caso clínico breve e claro para um estudante de medicina sobre um paciente apresentando sinais clássicos de celulite ou erisipela. Inclua dados demográficos do paciente, queixa principal, história relevante e principais achados do exame físico. O caso deve ser típico e ilustrativo. Ao final, em uma nova linha e começando com 'Diagnóstico:', indique o diagnóstico mais provável. Formate a resposta em português.";
        callGemini(prompt, caseStudyOutput, generateCaseBtn);
    });

    askQuestionBtn.addEventListener('click', () => {
        const question = qaInput.value.trim();
        if (!question) {
            qaOutput.textContent = "Por favor, digite uma pergunta.";
            return;
        }
        const prompt = `Você é um tutor de IA para estudantes de medicina, especializado em dermatologia e doenças infecciosas. Responda à seguinte pergunta sobre celulite e erisipela de forma clara, concisa e precisa, em português. Pergunta: "${question}"`;
        callGemini(prompt, qaOutput, askQuestionBtn);
    });
});
</script>

</body>
</html>


